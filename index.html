<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- CSP allowing 'unsafe-inline' for script, removing frame-ancestors from meta -->
  <meta http-equiv="Content-Security-Policy" 
        content="default-src 'self'; 
                 script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; 
                 style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://fonts.googleapis.com; 
                 font-src 'self' https://fonts.gstatic.com data:;
                 img-src 'self' data: blob:; 
                 connect-src 'self'; 
                 worker-src 'self';
                 object-src 'none';
                 manifest-src 'self';
                 upgrade-insecure-requests;">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Leon Kruspel</title>
  <!-- Favicon links -->
  <link rel="icon" type="image/png" href="favicon/leon_logo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="manifest" href="favicon/site.webmanifest">
  <!-- Preload links -->
  <link rel="preload" href="css/main.css" as="style">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" as="style">
  <link rel="preload" href="js/main.js" as="script">
  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/index.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/landing.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/project.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/additional.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/cookie-notice.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/compatibility.css">
  <!-- Load fonts asynchronously -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" 
        rel="stylesheet" 
        media="print" 
        onload="this.media='all'">
  <!-- Add these to the head -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <!-- Scripts -->
  <script>
    // Ensure page starts at top on load
    window.addEventListener('DOMContentLoaded', function() {
      window.scrollTo({ top: 0, behavior: 'instant' });
    });
    window.addEventListener('load', function() {
      window.scrollTo({ top: 0, behavior: 'instant' });
    });
  </script>
  <script src="js/main.js" defer></script>
  <script src="js/navigation.js" defer></script>
  <script src="js/cookie-notice.js" defer></script>
  <script src="js/error-handler.js" defer></script>
  <script src="js/image-handler.js" defer></script>
  <script src="js/browser-compatibility.js" defer></script>
  <!-- Load non-critical scripts after page load -->
  <script>
    window.addEventListener('load', function() {
      const scripts = [
        'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js',
        'js/index.js',
        'js/project.js'
      ];
      
      scripts.forEach(src => {
        const script = document.createElement('script');
        script.src = src;
        script.async = true;
        document.body.appendChild(script);
      });
    });
  </script>
  <!-- Add these in the head section -->
  <meta name="theme-color" content="#4a90e2">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">
</head>
<body class="light-theme" onload="initSite()">
  <!-- Navigation Bar -->
  <nav id="mainNavbar" class="navbar navbar-expand-lg navbar-light bg-light shadow-sm fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#landing" onclick="event.preventDefault(); navigateTo('landing'); return false;">
        <span class="brand-text">Leon Kruspel</span>
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon">
          <span></span>
        </span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
          <!-- Projects Page Link -->
          <li class="nav-item">
            <a class="nav-link" href="#projects" onclick="event.preventDefault(); navigateTo('projects'); return false;" data-i18n="navProjects">
              <i class="fas fa-briefcase me-1"></i>
              <span>Projects</span>
            </a>
          </li>
          <!-- About Page Link -->
          <li class="nav-item">
            <a class="nav-link" href="#about" onclick="event.preventDefault(); navigateTo('about'); return false;" data-i18n="navAbout">
              <i class="fas fa-user me-1"></i>
              <span>About</span>
            </a>
          </li>
          <!-- Imprint Page Link -->
          <li class="nav-item">
            <a class="nav-link" href="#imprint" onclick="event.preventDefault(); navigateTo('imprint'); return false;" data-i18n="navImprint">
              <i class="fas fa-file-alt me-1"></i>
              <span>Imprint</span>
            </a>
          </li>

          <!-- Settings Menu (Dark Mode + Language) -->
          <li class="nav-item dropdown settings-menu">
            <a class="nav-link settings-toggle dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Settings">
              <i class="fas fa-cog"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end settings-dropdown">
              <!-- Dark Mode Toggle -->
              <li class="settings-item">
                <div class="settings-option">
                  <div class="settings-option-content">
                    <i class="fas fa-moon settings-icon"></i>
                    <span class="settings-label" data-i18n="toggleDarkMode">Dark Mode</span>
                  </div>
                  <div class="form-check form-switch settings-switch">
                    <input
                      class="form-check-input theme-switch"
                      type="checkbox"
                      id="themeSwitch"
                      onclick="toggleTheme()"
                    />
                  </div>
                </div>
              </li>
              
              <li><hr class="dropdown-divider"></li>
              
              <!-- Language Selector -->
              <li class="settings-item">
                <div class="settings-option-header">
                  <i class="fas fa-globe settings-icon"></i>
                  <span class="settings-label" data-i18n="language">Language</span>
                </div>
                <div class="settings-language-options">
                  <a class="settings-language-option" data-lang="en" href="#" onclick="event.preventDefault(); setLanguage('en'); return false;">
                    <span class="language-flag">ðŸ‡¬ðŸ‡§</span>
                    <span>English</span>
                    <i class="fas fa-check language-check"></i>
                  </a>
                  <a class="settings-language-option" data-lang="de" href="#" onclick="event.preventDefault(); setLanguage('de'); return false;">
                    <span class="language-flag">ðŸ‡©ðŸ‡ª</span>
                    <span>Deutsch</span>
                    <i class="fas fa-check language-check"></i>
                  </a>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Dynamic Content Container -->
  <div id="content" class="container">
    <!-- Content from partials (landing, projects, about, imprint) will be loaded here via AJAX -->
  </div>

  <!-- Add this right after the body tag -->
  <noscript>
    <div class="noscript-warning">
      <div class="alert alert-warning" role="alert">
        <h4>JavaScript Required</h4>
        <p>Please enable JavaScript to use all features of this website.</p>
      </div>
    </div>
  </noscript>
</body>
</html>
